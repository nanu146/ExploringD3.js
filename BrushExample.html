<html>
<head>
    <title>Brush Example</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
    <script type="text/javascript">
        /////////// data variable declaration
        var globaldata;
        
        window.onload=function(){
            margin={left:20,right:20,top:20,bottom:20}
            var height=600-margin.top-margin.bottom;
            var width=800-margin.left-margin.right;
            
            var xscale=d3.scale.ordinal().rangePoints([0,width],1);
            
            var svg=d3.select("body").append("svg")
            .style("height",height+margin.bottom+margin.top)
            .style("width",width+margin.left+margin.right);
            
            graph=svg.append("g").style("transform","translate("+margin.left+"px,"+margin.top+"px)");
            
            graph.append("rect").style({"width":width+"px","height":height+"px",fill:"green"})
                
            ///// getting data
            d3.csv("Parallel Coordinates/cars.csv",function(error, data){
                if(!!error)
                    {
                        console.warn(error);
                    }
                globaldata=data;
                dimentions=Object.keys(data[0]).filter(function(d){return d!="name"});
                console.log(dimentions);
                console.log("--------------------------------------")
                xscale.domain(dimentions);
                console.log(xscale.domain());
                console.log(dimentions.map(function(d,i){return xscale(d)}))
                
                //// Creating a seperate scale for each if the dimentions
                
                var dimensionalscale={};
                dimentions.forEach(function(d,i){
                    dimensionalscale[d]=d3.scale.linear().range([height,0]);
                });
                
                // Filling the domain values for each of the dimention in dimentional scales
                
                dimentions.forEach(function(d,i){
                    dimensionalscale[d].domain(d3.extent(data.map(function(b,i){return +b[d]})));
                });
                globaldata=dimensionalscale;
                console.log(dimensionalscale);
                
                // Plotting circles with data
                
                graph.append("g").attr("class","circles").selectAll("circles").data(data)
                .enter().append("circle").each(function(d,i){
                    thisvalue=this;
                    dimentions.forEach(function(b,j){
                        val=b;
                        scale=xscale(b);
                        //console.log(scale);
                        d3.select(thisvalue).attr("r",3)
                            .attr("cx",function(c){/* console.log(val+ " " +b + xscale(b)+" "+scale );*/ return (function(){return xscale(b)}()) })
                            .attr("cy",function(c){console.log(b+" "+c[b]+" "+dimensionalscale[b]( c[b]));return dimensionalscale[b]( c[b])})
                            .style("fill","blue");
                    });
                    
                });
                
            })
            
        }
    </script>
</head>
<body>
</body>
</html>